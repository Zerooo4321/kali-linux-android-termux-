import phonenumbers
from phonenumbers import geocoder, carrier, timezone
import tkinter as tk
from tkinter import messagebox
from tkinter import ttk  # For Combobox

def get_phone_details(number_str):
    try:
        parsed_number = phonenumbers.parse(number_str, None)
        is_valid = phonenumbers.is_valid_number(parsed_number)
        
        if not is_valid:
            return "Invalid phone number."
        
        country_code = parsed_number.country_code
        national_number = parsed_number.national_number
        international_format = phonenumbers.format_number(parsed_number, phonenumbers.PhoneNumberFormat.INTERNATIONAL)
        national_format = phonenumbers.format_number(parsed_number, phonenumbers.PhoneNumberFormat.NATIONAL)
        e164_format = phonenumbers.format_number(parsed_number, phonenumbers.PhoneNumberFormat.E164)
        location = geocoder.description_for_number(parsed_number, "en")
        carrier_name = carrier.name_for_number(parsed_number, "en")
        time_zones = timezone.time_zones_for_number(parsed_number)
        
        details = f"""
        Phone Number: {number_str}
        Valid: Yes
        Country Code: +{country_code}
        National Number: {national_number}
        International Format: {international_format}
        National Format: {national_format}
        E164 Format: {e164_format}
        Location: {location}
        Carrier: {carrier_name if carrier_name else 'Not available'}
        Time Zones: {', '.join(time_zones)}
        """
        return details.strip()
    
    except phonenumbers.NumberParseException:
        return "Error parsing the number. Ensure it's in international format (e.g., +1234567890)."

def on_check():
    selected_code = country_combo.get().split(' ')[1]  # Get the code part (e.g., +1 after flag)
    national_num = entry.get()
    if not selected_code or not national_num:
        messagebox.showerror("Error", "Please select a country code and enter a phone number.")
        return
    full_number = selected_code + national_num  # Combine (e.g., +1 + 234567890)
    result = get_phone_details(full_number)
    result_text.config(state='normal')  # Temporarily enable to insert text
    result_text.delete(1.0, tk.END)
    result_text.insert(tk.END, result)
    result_text.config(state='disabled')  # Disable again to make it read-only

def clear_fields():
    entry.delete(0, tk.END)  # Clear the input field
    result_text.config(state='normal')  # Temporarily enable to clear
    result_text.delete(1.0, tk.END)
    result_text.config(state='disabled')  # Disable again
    country_combo.set('')  # Clear the dropdown

def toggle_dark_mode():
    global dark_mode
    dark_mode = not dark_mode
    apply_theme()

def apply_theme():
    if dark_mode:
        # Dark mode colors
        root.configure(bg="#121212")
        label.configure(bg="#121212", fg="#FFFFFF")
        entry.configure(bg="#333333", fg="#FFFFFF", insertbackground="#FFFFFF")
        country_combo.configure(style="TCombobox")  # Custom style for dark mode
        button.configure(bg="#BB86FC", fg="#000000", activebackground="#9C4DFF")
        clear_button.configure(bg="#BB86FC", fg="#000000", activebackground="#9C4DFF")
        dark_button.configure(bg="#BB86FC", fg="#000000", activebackground="#9C4DFF")
        result_text.configure(bg="#1E1E1E", fg="#FFFFFF")
        # Set Combobox style for dark mode
        style.configure("TCombobox", fieldbackground="#333333", background="#BB86FC", foreground="#FFFFFF")
    else:
        # Light mode colors
        root.configure(bg="#E0F7FA")
        label.configure(bg="#E0F7FA", fg="#00796B")
        entry.configure(bg="#FFFFFF", fg="#000000", insertbackground="#000000")
        country_combo.configure(style="TCombobox")
        button.configure(bg="#4CAF50", fg="#FFFFFF", activebackground="#45A049")
        clear_button.configure(bg="#4CAF50", fg="#FFFFFF", activebackground="#45A049")
        dark_button.configure(bg="#4CAF50", fg="#FFFFFF", activebackground="#45A049")
        result_text.configure(bg="#F1F8E9", fg="#2E7D32")
        # Set Combobox style for light mode
        style.configure("TCombobox", fieldbackground="#FFFFFF", background="#4CAF50", foreground="#000000")

# GUI Setup
root = tk.Tk()
root.title("Phone Number Details ALAN")
root.geometry("500x400")

dark_mode = False  # Start in light mode

# Style for Combobox
style = ttk.Style()
style.theme_use('default')

label = tk.Label(root, text="Select Country Code and Enter Phone Number:", font=("Arial", 12, "bold"))
label.pack(pady=10)

# Frame for dropdown and input
input_frame = tk.Frame(root)
input_frame.pack(pady=5)

# Country code dropdown with flags (common codes; flags added where available)
country_codes = [
    "ğŸ‡ºğŸ‡¸ +1 (United States)", "ğŸ‡·ğŸ‡º +7 (Russia)", "ğŸ‡ªğŸ‡¬ +20 (Egypt)", "ğŸ‡¿ğŸ‡¦ +27 (South Africa)", "ğŸ‡¬ğŸ‡· +30 (Greece)", "ğŸ‡³ğŸ‡± +31 (Netherlands)", "ğŸ‡§ğŸ‡ª +32 (Belgium)", "ğŸ‡«ğŸ‡· +33 (France)", "ğŸ‡ªğŸ‡¸ +34 (Spain)", "ğŸ‡­ğŸ‡º +36 (Hungary)", "ğŸ‡®ğŸ‡¹ +39 (Italy)", "ğŸ‡·ğŸ‡´ +40 (Romania)", "ğŸ‡¨ğŸ‡­ +41 (Switzerland)", "ğŸ‡¦ğŸ‡¹ +43 (Austria)", "ğŸ‡¬ğŸ‡§ +44 (United Kingdom)", "ğŸ‡©ğŸ‡° +45 (Denmark)", "ğŸ‡¸ğŸ‡ª +46 (Sweden)", "ğŸ‡³ğŸ‡´ +47 (Norway)", "ğŸ‡µğŸ‡± +48 (Poland)", "ğŸ‡©ğŸ‡ª +49 (Germany)", "ğŸ‡µğŸ‡ª +51 (Peru)", "ğŸ‡²ğŸ‡½ +52 (Mexico)", "ğŸ‡¨ğŸ‡º +53 (Cuba)", "ğŸ‡¦ğŸ‡· +54 (Argentina)", "ğŸ‡§ğŸ‡· +55 (Brazil)", "ğŸ‡¨ğŸ‡± +56 (Chile)", "ğŸ‡¨ğŸ‡´ +57 (Colombia)", "ğŸ‡»ğŸ‡ª +58 (Venezuela)", "ğŸ‡²ğŸ‡¾ +60 (Malaysia)", "ğŸ‡¦ğŸ‡º +61 (Australia)", "ğŸ‡®ğŸ‡© +62 (Indonesia)", "ğŸ‡µğŸ‡­ +63 (Philippines)", "ğŸ‡³ğŸ‡¿ +64 (New Zealand)", "ğŸ‡¸ğŸ‡¬ +65 (Singapore)", "ğŸ‡¹ğŸ‡­ +66 (Thailand)", "ğŸ‡¯ğŸ‡µ +81 (Japan)", "ğŸ‡°ğŸ‡· +82 (South Korea)", "ğŸ‡»ğŸ‡³ +84 (Vietnam)", "ğŸ‡¨ğŸ‡³ +86 (China)", "ğŸ‡¹ğŸ‡· +90 (Turkey)", "ğŸ‡®ğŸ‡³ +91 (India)", "ğŸ‡µğŸ‡° +92 (Pakistan)", "ğŸ‡¦ğŸ‡« +93 (Afghanistan)", "ğŸ‡±ğŸ‡° +94 (Sri Lanka)", "ğŸ‡²ğŸ‡² +95 (Myanmar)", "ğŸ‡®ğŸ‡· +98 (Iran)", "ğŸ‡²ğŸ‡¦ +212 (Morocco)", "ğŸ‡©ğŸ‡¿ +213 (Algeria)", "ğŸ‡¹ğŸ‡³ +216 (Tunisia)", "ğŸ‡±ğŸ‡¾ +218 (Libya)", "ğŸ‡¬ğŸ‡² +220 (Gambia)", "ğŸ‡¸ğŸ‡³ +221 (Senegal)", "ğŸ‡²ğŸ‡· +222 (Mauritania)", "ğŸ‡²ğŸ‡± +223 (Mali)", "ğŸ‡¬ğŸ‡³ +224 (Guinea)", "ğŸ‡¨ğŸ‡® +225 (Ivory Coast)", "ğŸ‡§ğŸ‡« +226 (Burkina Faso)", "ğŸ‡³ğŸ‡ª +227 (Niger)", "ğŸ‡¹ğŸ‡¬ +228 (Togo)", "ğŸ‡§ğŸ‡¯ +229 (Benin)", "ğŸ‡²ğŸ‡º +230 (Mauritius)", "ğŸ‡±ğŸ‡· +231 (Liberia)", "ğŸ‡¸ğŸ‡± +232 (Sierra Leone)", "ğŸ‡¬ğŸ‡­ +233 (Ghana)", "ğŸ‡³ğŸ‡¬ +234 (Nigeria)", "ğŸ‡¹ğŸ‡© +235 (Chad)", "ğŸ‡¨ğŸ‡« +236 (Central African Republic)", "ğŸ‡¨ğŸ‡² +237 (Cameroon)", "ğŸ‡¨ğŸ‡» +238 (Cape Verde)", "ğŸ‡¸ğŸ‡¹ +239 (Sao Tome and Principe)", "ğŸ‡¬ğŸ‡¶ +240 (Equatorial Guinea)", "ğŸ‡¬ğŸ‡¦ +241 (Gabon)", "ğŸ‡¨ğŸ‡¬ +242 (Republic of the Congo)", "ğŸ‡¨ğŸ‡© +243 (Democratic Republic of the Congo)", "ğŸ‡¦ğŸ‡´ +244 (Angola)", "ğŸ‡¬ğŸ‡¼ +245 (Guinea-Bissau)", "ğŸ‡®ğŸ‡´ +246 (British Indian Ocean Territory)", "ğŸ‡¸ğŸ‡¨ +248 (Seychelles)", "ğŸ‡¸ğŸ‡© +249 (Sudan)", "ğŸ‡·ğŸ‡¼ +250 (Rwanda)", "ğŸ‡ªğŸ‡¹ +251 (Ethiopia)", "ğŸ‡¸ğŸ‡´ +252 (Somalia)", "ğŸ‡©ğŸ‡¯ +253 (Djibouti)", "ğŸ‡°ğŸ‡ª +254 (Kenya)", "ğŸ‡¹ğŸ‡¿ +255 (Tanzania)", "ğŸ‡ºğŸ‡¬ +256 (Uganda)", "ğŸ‡§ğŸ‡® +257 (Burundi)", "ğŸ‡²ğŸ‡¿ +258 (Mozambique)", "ğŸ‡¿ğŸ‡² +260 (Zambia)", "ğŸ‡²ğŸ‡¬ +261 (Madagascar)", "ğŸ‡·ğŸ‡ª +262 (Reunion)", "ğŸ‡¿ğŸ‡¼ +263 (Zimbabwe)", "ğŸ‡³ğŸ‡¦ +264 (Namibia)", "ğŸ‡²ğŸ‡¼ +265 (Malawi)", "ğŸ‡±ğŸ‡¸ +266 (Lesotho)", "ğŸ‡§ğŸ‡¼ +267 (Botswana)", "ğŸ‡¸ğŸ‡¿ +268 (Swaziland)", "ğŸ‡°ğŸ‡² +269 (Comoros)", "ğŸ‡¸ğŸ‡­ +290 (Saint Helena)", "ğŸ‡ªğŸ‡· +291 (Eritrea)", "ğŸ‡¦ğŸ‡¼ +297 (Aruba)", "ğŸ‡«ğŸ‡´ +298 (Faroe Islands)", "ğŸ‡¬ğŸ‡± +299 (Greenland)", "ğŸ‡¬ğŸ‡® +350 (Gibraltar)", "ğŸ‡µğŸ‡¹ +351 (Portugal)", "ğŸ‡±ğŸ‡º +352 (Luxembourg)", "ğŸ‡®ğŸ‡ª +353 (Ireland)", "ğŸ‡®ğŸ‡¸ +354 (Iceland)", "ğŸ‡¦ğŸ‡± +355 (Albania)", "ğŸ‡²ğŸ‡¹ +356 (Malta)", "ğŸ‡¨ğŸ‡¾ +357 (Cyprus)", "ğŸ‡«ğŸ‡® +358 (Finland)", "ğŸ‡§ğŸ‡¬ +359 (Bulgaria)", "ğŸ‡±ğŸ‡¹ +370 (Lithuania)", "ğŸ‡±ğŸ‡» +371 (Latvia)", "ğŸ‡ªğŸ‡ª +372 (Estonia)", "ğŸ‡²ğŸ‡© +373 (Moldova)", "ğŸ‡¦ğŸ‡² +374 (Armenia)", "ğŸ‡§ğŸ‡¾ +375 (Belarus)", "ğŸ‡¦ğŸ‡© +376 (Andorra)", "ğŸ‡²ğŸ‡¨ +377 (Monaco)", "ğŸ‡¸ğŸ‡² +378 (San Marino)", "ğŸ‡ºğŸ‡¦ +380 (Ukraine)", "ğŸ‡·ğŸ‡¸ +381 (Serbia)", "ğŸ‡²ğŸ‡ª +382 (Montenegro)", "ğŸ‡½ğŸ‡° +383 (Kosovo)", "ğŸ‡­ğŸ‡· +385 (Croatia)", "ğŸ‡¸ğŸ‡® +386 (Slovenia)", "ğŸ‡§ğŸ‡¦ +387 (Bosnia and Herzegovina)", "ğŸ‡²ğŸ‡° +389 (Macedonia)", "ğŸ‡¨ğŸ‡¿ +420 (Czech Republic)", "ğŸ‡¸ğŸ‡° +421 (Slovakia)", "ğŸ‡±ğŸ‡® +423 (Liechtenstein)", "ğŸ‡«ğŸ‡° +500 (Falkland Islands)", "ğŸ‡§ğŸ‡¿ +501 (Belize)", "ğŸ‡¬ğŸ‡¹ +502 (Guatemala)", "ğŸ‡¸ğŸ‡» +503 (El Salvador)", "ğŸ‡­ğŸ‡³ +504 (Honduras)", "ğŸ‡³ğŸ‡® +505 (Nicaragua)", "ğŸ‡¨ğŸ‡· +506 (Costa Rica)", "ğŸ‡µğŸ‡¦ +507 (Panama)", "ğŸ‡µğŸ‡² +508 (Saint Pierre and Miquelon)", "ğŸ‡­ğŸ‡¹ +509 (Haiti)", "ğŸ‡¬ğŸ‡µ +590 (Guadeloupe)", "ğŸ‡§ğŸ‡´ +591 (Bolivia)", "ğŸ‡¬ğŸ‡¾ +592 (Guyana)", "ğŸ‡ªğŸ‡¨ +593 (Ecuador)", "ğŸ‡¬ğŸ‡« +594 (French Guiana)", "ğŸ‡µğŸ‡¾ +595 (Paraguay)", "ğŸ‡²ğŸ‡¶ +596 (Martinique)", "ğŸ‡¸ğŸ‡· +597 (Suriname)", "ğŸ‡ºğŸ‡¾ +598 (Uruguay)", "ğŸ‡§ğŸ‡¶ +599 (Netherlands Antilles)", "ğŸ‡¹ğŸ‡± +670 (East Timor)", "ğŸ‡¦ğŸ‡¶ +672 (Antarctica)", "ğŸ‡§ğŸ‡³ +673 (Brunei)", "ğŸ‡³ğŸ‡· +674 (Nauru)", "ğŸ‡µğŸ‡¬ +675 (Papua New Guinea)", "ğŸ‡¹ğŸ‡´ +676 (Tonga)", "ğŸ‡¸ğŸ‡§ +677 (Solomon Islands)", "ğŸ‡»ğŸ‡º +678 (Vanuatu)", "ğŸ‡«ğŸ‡¯ +679 (Fiji)", "ğŸ‡µğŸ‡¼ +680 (Palau)", "ğŸ‡¼ğŸ‡« +681 (Wallis and Futuna)", "ğŸ‡¨ğŸ‡° +682 (Cook Islands)", "ğŸ‡³ğŸ‡º +683 (Niue)", "ğŸ‡¦ğŸ‡¸ +684 (American Samoa)", "ğŸ‡¼ğŸ‡¸ +685 (Samoa)", "ğŸ‡°ğŸ‡® +686 (Kiribati)", "ğŸ‡³ğŸ‡¨ +687 (New Caledonia)", "ğŸ‡¹ğŸ‡» +688 (Tuvalu)", "ğŸ‡µğŸ‡« +689 (French Polynesia)", "ğŸ‡¹ğŸ‡° +690 (Tokelau)", "ğŸ‡«ğŸ‡² +691 (Micronesia)", "ğŸ‡²ğŸ‡­ +692 (Marshall Islands)", "ğŸ‡°ğŸ‡µ +850 (North Korea)", "ğŸ‡­ğŸ‡° +852 (Hong Kong)", "ğŸ‡²ğŸ‡´ +853 (Macau)", "ğŸ‡°ğŸ‡­ +855 (Cambodia)", "ğŸ‡±ğŸ‡¦ +856 (Laos)", "ğŸ‡§ğŸ‡© +880 (Bangladesh)", "ğŸ‡¹ğŸ‡¼ +886 (Taiwan)", "ğŸ‡²ğŸ‡» +960 (Maldives)", "ğŸ‡±ğŸ‡§ +961 (Lebanon)", "ğŸ‡¯ğŸ‡´ +962 (Jordan)", "ğŸ‡¸ğŸ‡¾ +963 (Syria)", "ğŸ‡®ğŸ‡¶ +964 (Iraq)", "ğŸ‡°ğŸ‡¼ +965 (Kuwait)", "ğŸ‡¸ğŸ‡¦ +966 (Saudi Arabia)", "ğŸ‡¾ğŸ‡ª +967 (Yemen)", "ğŸ‡´ğŸ‡² +968 (Oman)", "ğŸ‡µğŸ‡¸ +970 (Palestine)", "ğŸ‡¦ğŸ‡ª +971 (United Arab Emirates)", "ğŸ‡®ğŸ‡± +972 (Israel)", "ğŸ‡§ğŸ‡­ +973 (Bahrain)", "ğŸ‡¶ğŸ‡¦ +974 (Qatar)", "ğŸ‡§ğŸ‡¹ +975 (Bhutan)", "ğŸ‡²ğŸ‡³ +976 (Mongolia)", "ğŸ‡³ğŸ‡µ +977 (Nepal)", "ğŸ‡¹ğŸ‡¯ +992 (Tajikistan)", "ğŸ‡¹ğŸ‡² +993 (Turkmenistan)", "ğŸ‡¦ğŸ‡¿ +994 (Azerbaijan)", "ğŸ‡¬ğŸ‡ª +995 (Georgia)", "ğŸ‡°ğŸ‡¬ +996 (Kyrgyzstan)", "ğŸ‡ºğŸ‡¿ +998 (Uzbekistan)"
]
country_combo = ttk.Combobox(input_frame, values=country_codes, width=30, font=("Arial", 10))
country_combo.pack(side=tk.LEFT, padx=5)
country_combo.set("Select Country Code")  # Default text

entry = tk.Entry(input_frame, width=25, font=("Arial", 10))
entry.pack(side=tk.LEFT, padx=5)

# Frame for buttons in one line
button_frame = tk.Frame(root)
button_frame.pack(pady=10)

button = tk.Button(button_frame, text="Check Details", command=on_check, font=("Arial", 10, "bold"))
button.pack(side=tk.LEFT, padx=5)

clear_button = tk.Button(button_frame, text="Clear", command=clear_fields, font=("Arial", 10, "bold"))
clear_button.pack(side=tk.LEFT, padx=5)

dark_button = tk.Button(button_frame, text="Toggle Dark Mode", command=toggle_dark_mode, font=("Arial", 10, "bold"))
dark_button.pack(side=tk.LEFT, padx=5)

result_text = tk.Text(root, height=15, width=60, font=("Arial", 10), state='disabled')  # Made read-only
result_text.pack(pady=10)

apply_theme()  # Apply initial theme
root.mainloop()
